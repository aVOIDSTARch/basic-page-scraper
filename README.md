<div align="center">

```
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@%##################%%@@@@%#%###%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@%#%%##%%##%#######%%@@@%%%%%%##%%%@%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@%#%###@@@@@@@@@@@@@@%###%%@%####%@@@%%####%%#%%%%@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@%##@@@@@@@@@@@@@@@%#%#############@@@@@@@@@@%%%@##%##%%@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@%#%@@@@@@@@@@@@@##@%##############@@@@@@@@@@@@@@@@@@%@%%#%%@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@%%@@@@@@@@@@@@%%#@%######%%##%####%@@@@@@@@@@@@@@@@@@@@@@@%%@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@%#@@@@@@@@@@@@#%#@%#####%@#%#%#####@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@##@@@@@@@@@@##%#@%####*%%%####*####%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@%#%@@@@@@@@@@#%%%@#####@%@@@@@@@%%##@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@#%@@@@@@@@@@#%%%@##%@@@@@@@@%%@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@%#%@@@@@@@@@##%%@#@@%%%%@@%%#%%%@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@%##@@@@@@@@%###%@@%%%%##**#%@@%%@%@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@##%@@@@@@%%%##%@%%%%%%#%%#%@@@@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@%%#@@@@%%%#@%#@@%@@@@%@%%##%%%@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@##@@@@%###%##@@%@%%%%####%%@@@%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@%##@@@@@%###%@@@@@%%%####@%@@%%#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@%#%%###@%%%@@@@%%#%%#%#%@@@%%%%#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@#%@%#%#%%@@@@@@@@@@@@@@@@%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@%%###%@@##%%#%%@@@@@@@@@@@@@@%%%%%%%####%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@%##%####%@###@###%%%%##@@@@%##%##%%%%#%%###########@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@%%%%##%%#%@%##%@###%%###%%%@@%@%%%%%%%@%#############@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@%%%%#@@%#%@%##%%%##%#%@@%%%@@%%%#%#%%%##%##%##@%%@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@%%%@##@@%@@%%@%%#%@##%@%%%#%@@@@@@@%%####%%###%%#####%@%%@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@%%%%%####@%@@#%@###@####%%%%%@%%%@%%%%#%#%#####%%#####@@@%#@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@###%%########%%%%%##%%##%%%%#%#%%@@@%%@%#########%####%%@@###@@@@@@@@@@@@@@@@
@@@@@@@@@@@@%%%%%%%%%%##%%@@@@@##%@%#%%%%%%%@@@@%@@@@@%%#####%%%#%##%@@%#%@@@@@@@@@@@@@@@@
@@@@@@@@@@@#%%%%%@@@%%##@@@@@@@@%%@%%%%%######%@@@@@@%@%#%%%#%%@####%@@%#%#@@@@@@@@@@@@@@@
@@@@@@@@@##%%%%%%%##@%%%%%@@@@@%%%@@@%%%#####@@%%%@%%%#@%@%%##%%###%#@%%###@@@@@@@@@@@@@@@
@@@@@@@@#%%%#####%##@%%%@@%@%##%@%@@%%%@#%%##%%%%%%#%@@%#####%@%###%#%%#%##%@@@@@@@@@@@@@@
@@@@@@@%%%%%#%%%@#%%@%%@@@%@%%#%@@@@%%%%#%%%##%%%@@@%%%%%%##%@@%%#%@%%%@#%#@@@@@@@@@@@@@@@
@@@@@@%%%#%%@%%%%%@%@@%%@@@@@%%%@@%@@@%%%@@@@@@@@@@%##%@%%#%%@@%%#%@%%@%###@@@@@@@@@@@@@@@
@@@@@@##%%@#%%####@%%@%#@%%@@@@@@@@@@%#######%@@%%%##%#####%@@@###%##@@####@@@@@@@@@@@@@@@
@@@@@%#%#%%@%##%%%%%@%%#%@@%%%@@@@@@##%###%######%%%@######@@@@###@#%@#####%@@@@@@@@@@@@@@
@@@@@%%@%@%@%@@@@@%%%@%%%%#%##%@@@@%%%%%###@%@@%@@%@@####%@@@@@#%@%%@%#####@@@@@@@@@@@@@@@
@@@@@%@%%@%%@@@@@%@%%@%#%%%#%%%%@@@@%%%%%%####@@@@%%%##%%%@@@@@#@%%@%%###%%@@@@@@@@@@@@@@@
@@@@%%@#@%%%%@@@@@%%############@@@@%%#%%#############%##%%@@@##@#@%####%%%@@@@@@@@@@@@@@@
@@@@#%@#@#%%@%@@@%@%%#######%###%@@@@###@%#########%%%%%##%@%#%@%@######%@%%@@@@@@@@@@@@@@
@@@@@@@%%%@%%@@@@@%%#%%%#%%%%%%@%@@@@@###@@##%%%%@%%%%%%#%@%%%@%%####%#%%@%%@@@@@@@@@@@@@@

       ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà    ‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
      ‚ñà‚ñà       ‚ñà‚ñà      ‚ñà‚ñà   ‚ñà‚ñà  ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà
      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
           ‚ñà‚ñà  ‚ñà‚ñà      ‚ñà‚ñà   ‚ñà‚ñà  ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà      ‚ñà‚ñà   ‚ñà‚ñà
      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà   ‚ñà‚ñà  ‚ñà‚ñà   ‚ñà‚ñà ‚ñà‚ñà      ‚ñà‚ñà   ‚ñà‚ñà

              T H E   H A R V E S T E R   O F   W E B   D A T A
```

[![Bun](https://img.shields.io/badge/runtime-Bun-f9f1e1?logo=bun&logoColor=000)](https://bun.sh)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0-3178c6?logo=typescript&logoColor=fff)](https://www.typescriptlang.org/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

**A fast, lightweight web scraper with intelligent media cataloging and deduplication.**

[Quick Start](#-quick-start) ‚Ä¢
[Features](#-features) ‚Ä¢
[Usage](#-usage) ‚Ä¢
[Configuration](#-configuration) ‚Ä¢
[Examples](#-examples)

</div>

---

## ‚ú® Features

- **Lightning Fast** ‚Äî Built on [Bun](https://bun.sh) for blazing performance
- **Smart Media Detection** ‚Äî Automatically extracts images, videos, audio, fonts, and documents
- **SHA-256 Deduplication** ‚Äî Prevents duplicate downloads across scrapes
- **Size-Aware Downloads** ‚Äî Configurable per-file limits with oversized content tracking
- **Rich Manifests** ‚Äî JSON manifests with URLs, MIME types, file hashes, and sizes
- **Zero Config Start** ‚Äî Works out of the box, customize when you need to

## üöÄ Quick Start

```bash
# Clone and enter the repo
git clone https://github.com/yourusername/scrapr.git
cd scrapr

# Run the installer (handles everything)
./scrapr install

# Scrape your first page
./scrapr --url https://example.com
```

That's it! Check the `output/` folder for your scraped content.

## üì¶ Installation

### One-Line Install

```bash
./scrapr install
```

This automatically:
- Detects or installs **Bun**, **Deno**, and **Node.js**
- Installs all project dependencies
- Configures everything for immediate use

### Manual Setup

```bash
# Install Bun (if needed)
curl -fsSL https://bun.sh/install | bash

# Install dependencies
cd scraper && bun install
```

## üîß Usage

### Basic Scraping

```bash
# Scrape a URL (catalogs media, doesn't download by default)
./scrapr --url https://example.com

# Scrape with a custom output name
./scrapr --url https://example.com --name my-project
```

### Downloading Media

```bash
# Download images only
./scrapr --url https://example.com --download-media images

# Download multiple media types
./scrapr --url https://example.com --download-media images,video,audio

# Limit file size to 5MB per file
./scrapr --url https://example.com --download-media images --max-download-bytes 5242880
```

### CLI Reference

| Flag | Short | Description |
|------|-------|-------------|
| `--url <URL>` | `-u` | URL to scrape (required) |
| `--name <name>` | `-n` | Output folder name |
| `--output <path>` | `-o` | Custom output directory |
| `--download-media <types>` | | Media types to download (`images`, `video`, `audio`, `fonts`, `documents`, `other`, or `none`) |
| `--max-download-bytes <n>` | | Per-file size limit in bytes |
| `--help` | `-h` | Show help message |

## üìÅ Output Structure

Each scrape creates a timestamped folder:

```
output/
‚îî‚îÄ‚îÄ example.com-1702656000000/
    ‚îú‚îÄ‚îÄ index.html          # Fetched HTML
    ‚îú‚îÄ‚îÄ manifest.json       # Media catalog with hashes
    ‚îú‚îÄ‚îÄ metadata.json       # Scrape metadata
    ‚îú‚îÄ‚îÄ summary.scrape      # Human-readable summary
    ‚îú‚îÄ‚îÄ oversized_content.json  # Files that exceeded size limits
    ‚îî‚îÄ‚îÄ media/              # Downloaded media files
        ‚îú‚îÄ‚îÄ 1-logo.png
        ‚îú‚îÄ‚îÄ 2-hero.webp
        ‚îî‚îÄ‚îÄ ...
```

### Manifest Format

```json
{
  "source": "https://example.com",
  "fetchedAt": "2024-12-15T12:00:00.000Z",
  "files": [
    {
      "path": "media/1-logo.png",
      "url": "https://example.com/logo.png",
      "mime": "image/png",
      "sha256": "75038605ff9e35cc393e0ed8200069601c889100607cde67d2af68b9eb88e5d4",
      "size": 15829
    },
    {
      "path": null,
      "url": "https://example.com/huge-video.mp4",
      "downloaded": false,
      "size": 104857600,
      "inferredType": "video"
    }
  ]
}
```

## ‚öôÔ∏è Configuration

Create `scraper/config.json` to customize behavior:

```json
{
  "folderNaming": "slug-timestamp",
  "downloadMedia": [],
  "maxDownloadBytes": 5242880,
  "ignoreFileExtensions": ["exe", "dmg"],
  "oversizedThresholdBytes": 26214400,
  "dedupeAcrossScrapes": true
}
```

### Config Options

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `folderNaming` | string | `"slug-timestamp"` | Output folder naming strategy |
| `downloadMedia` | array | `[]` | Media types to download by default |
| `maxDownloadBytes` | number | `5242880` | Per-file download limit (5MB) |
| `ignoreFileExtensions` | array | `[]` | Extensions to skip downloading |
| `oversizedThresholdBytes` | number | `26214400` | Absolute max file size (25MB) |
| `dedupeAcrossScrapes` | boolean | `true` | Deduplicate files across scrapes |

### Media Types

- `images` ‚Äî jpg, jpeg, png, gif, webp, svg, bmp, ico
- `video` ‚Äî mp4, webm, mov, mkv, ogg
- `audio` ‚Äî mp3, wav, m4a, aac, flac
- `fonts` ‚Äî woff, woff2, ttf, otf, eot
- `documents` ‚Äî pdf, doc, docx, xls, xlsx, ppt, pptx
- `other` ‚Äî everything else

## üìã Examples

### Scrape a news site, download images under 1MB

```bash
./scrapr -u https://news.ycombinator.com --download-media images --max-download-bytes 1048576
```

### Scrape to a custom directory

```bash
./scrapr -u https://example.com -o ~/Desktop/scrapes -n my-scrape
```

### Catalog everything without downloading

```bash
./scrapr -u https://github.com --download-media none
```

### Download all media types

```bash
./scrapr -u https://example.com --download-media images,video,audio,fonts,documents
```

## üèóÔ∏è Architecture

```
scrapr/
‚îú‚îÄ‚îÄ scrapr              # CLI launcher (bash)
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ install.sh      # Runtime installer
‚îî‚îÄ‚îÄ scraper/
    ‚îú‚îÄ‚îÄ cli.ts          # Main CLI entry point
    ‚îú‚îÄ‚îÄ utils.ts        # URL parsing, media extraction, hashing
    ‚îî‚îÄ‚îÄ config.json     # User configuration
```

## ü§ù Contributing

Contributions welcome! Please feel free to submit a Pull Request.

## üìÑ License

MIT License - see [LICENSE](LICENSE) for details.

---

<div align="center">

**Built with [Bun](https://bun.sh)** ‚Äî the fast all-in-one JavaScript runtime

</div>
